<app-navbar></app-navbar>
<div>
    <div class="top">
        <div></div>
        <div></div>
        <div class="position-relative">
            <div style="margin-right: 20px;"> <i class="bi bi-bag-check fs-3"
                    style="margin-right: 15px; cursor: pointer;" routerLink="/Panier"></i>
                <span class="position-absolute top-0 translate-middle badge rounded-pill bg-danger">
                    {{ nombredeproduits }}
                </span>
            </div>
            <div>
                <i class="bi bi-cart fs-3" style="cursor: pointer;" routerLink="/Commande"></i>
                <span class="position-absolute top-0 translate-middle badge rounded-pill bg-danger">
                    {{nombredecommandes}}
                </span>
            </div>
        </div>
    </div>
    <div class="bottom">

        <div *ngIf="nombredeproduits==0">
            <h1>Aucune produit selectionner</h1>
        </div>
        <div *ngIf="nombredeproduits > 0" class="panier">
            <div class="table">
                <table class="table table-striped table-bordered mt-10">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Prix</th>
                            <th>Quantité</th>
                            <th>Description</th>
                            <th>Image</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of items">
                            <td>{{ item.produit.nom }}</td>
                            <td>{{ item.produit.prix }} TND</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <i class="bi bi-dash-circle text-warning" style="cursor: pointer;"
                                        (click)="decrement(item)" [class.disabled]="item.quantite <= 1"></i>
                                    <span class="mx-2">{{ item.quantite }}</span>
                                    <i class="bi bi-plus-circle text-success" style="cursor: pointer;"
                                        (click)="increment(item)"></i>
                                </div>
                            </td>
                            <td>{{ item.produit.description }}</td>
                            <td><img [src]="item.produit.imageUrl" alt="Produit" style="width: 80px; height: auto;">
                            </td>
                            <td>
                                <i class="bi bi-trash text-danger" style="cursor: pointer;"
                                    (click)="supprimerProduit(item.produit.id)"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="commande">
                <h5>Résumé de la commande</h5>
                <div>
                    <p>Nombre de produits : <strong>{{ nombredeproduits }}</strong></p>
                    <div *ngFor="let item of items">
                        <p>
                            Produit : {{ item.quantite }}Kg {{ item.produit.nom }} ---
                            {{ item.quantite * item.produit.prix }} TND
                        </p>
                    </div>
                    <p>Prix total : <strong>{{ prixTotal }} TND</strong></p>
                </div>
                <div *ngIf="confirmationMessage" class="alert alert-success">
                    {{ confirmationMessage }}
                </div>

                <button class="btn btn-primary w-100" (click)="passerCommande()" [disabled]="nombredeproduits === 0">
                    Passer la commande
                </button>

            </div>


        </div>
    </div>
</div>